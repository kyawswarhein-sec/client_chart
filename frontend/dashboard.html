<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/jpg" href="../assets/pics/favicon.jpg">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="./dashboard.css">
</head>
<body>

  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <!-- Left side - Hamburger button and Logo -->
        <div class="logo-section">
          <button class="hamburger-btn" id="hamburgerBtn">
            <i class="fas fa-bars"></i>
          </button>
          <div class="logo">
            Admin Dashboard
          </div>
        </div>
        
        <!-- Right side - Admin text and user menu -->
        <div class="header-right">
          <span class="admin-text">Admin</span>
          <div class="user-menu">
            <button class="user-btn" id="profileBtn" title="Profile">
              <i class="fas fa-user"></i>
            </button>
            
            <!-- Profile Dropdown -->
            <div class="profile-dropdown" id="profileDropdown">
              <div class="profile-header">
                <div class="profile-avatar">
                  <i class="fas fa-user"></i>
                </div>
                <h6 class="profile-name" id="profileName">Admin</h6>
                <p class="profile-role">Administrator</p>
              </div>
              
              <div class="profile-menu">
                <a href="#" class="profile-menu-item">
                  <i class="fas fa-user-cog"></i>
                  Profile Settings
                </a>
                <a href="#" class="profile-menu-item">
                  <i class="fas fa-key"></i>
                  Change Password
                </a>
                <a href="#" class="profile-menu-item">
                  <i class="fas fa-bell"></i>
                  Notifications
                </a>
                <div class="profile-menu-divider"></div>
                <a href="../backend/logout.php" class="profile-menu-item">
                  <i class="fas fa-sign-out-alt"></i>
                  Logout
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Sidebar Overlay -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h3 class="sidebar-title">Navigation</h3>
    </div>
    <nav class="sidebar-menu">
      <a href="./dashboard.html" class="menu-item active">
        <i class="fas fa-tachometer-alt"></i>
        Dashboard
      </a>
      <a href="../backend/logout.php" class="menu-item">
        <i class="fas fa-sign-out-alt"></i>
        Logout
      </a>
    </nav>
  </aside>

  <!-- Main Content Area -->
  <main class="main-content" id="mainContent">
    <div class="container">
      <h1>Welcome to Admin Dashboard</h1>
      
      <!-- Client Statistics Card -->
      <div class="row mb-4">
        <div class="col-md-3">
          <div class="card bg-primary text-white">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <h3 class="card-title mb-0" id="totalClients">0</h3>
                  <p class="card-text">Total Clients</p>
                </div>
                <div class="fs-1">
                  <i class="fas fa-users"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Charts Section -->
      <div class="row">
        <!-- Age Distribution Chart -->
        <div class="col-md-4 mb-4">
          <div class="card">
            <div class="card-header text-center bg-light">
              <h6 class="card-title mb-0 font-weight-bold">Age Distribution</h6>
            </div>
            <div class="card-body p-3">
              <div style="height: 250px; position: relative;">
                <canvas id="ageChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- Gender Distribution Chart -->
        <div class="col-md-4 mb-4">
          <div class="card">
            <div class="card-header text-center bg-light">
              <h6 class="card-title mb-0 font-weight-bold">Gender Distribution</h6>
            </div>
            <div class="card-body p-3">
              <div style="height: 250px; position: relative;">
                <canvas id="genderChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- Visa Type Distribution Chart -->
        <div class="col-md-4 mb-4">
          <div class="card">
            <div class="card-header text-center bg-light">
              <h6 class="card-title mb-0 font-weight-bold">Visa Type Distribution</h6>
            </div>
            <div class="card-body p-3">
              <div style="height: 250px; position: relative;">
                <canvas id="visaTypeChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Recent Clients Table -->
      <div class="row">
        <div class="col-12">
          <div class="card">
            <div class="card-header">
              <h5 class="card-title mb-0">Recent Clients</h5>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-striped">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Age</th>
                      <th>Gender</th>
                      <th>Location</th>
                      <th>Visa Type</th>
                      <th>Arrival Date</th>
                    </tr>
                  </thead>
                  <tbody id="clientsTableBody">
                    <!-- Recent data will be populated by JavaScript -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>



      <!-- All Clients Management -->
      <div class="row mt-4">
        <div class="col-12">
          <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
              <h5 class="card-title mb-0">All Clients</h5>
              <div class="d-flex align-items-center gap-3">
                <span class="text-muted">Show:</span>
                <select id="clientsPerPage" class="form-select form-select-sm" style="width: auto;">
                  <option value="10">10 clients</option>
                  <option value="30">30 clients</option>
                  <option value="50">50 clients</option>
                  <option value="100">100 clients</option>
                  <option value="all">All clients</option>
                </select>
                <span id="clientsCount" class="badge bg-primary">0 clients</span>
              </div>
            </div>
            <div class="card-body">
              <!-- Search and Filter -->
              <div class="row mb-3 filter-row">
                <div class="col-md-2">
                  <input type="text" id="searchClients" class="form-control" placeholder="Search clients...">
                </div>
                <div class="col-md-2">
                  <select id="filterGender" class="form-select">
                    <option value="">All Genders</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                  </select>
                </div>
                <div class="col-md-2">
                  <select id="filterLocation" class="form-select">
                    <option value="">All Locations</option>
                    <!-- Locations will be populated dynamically -->
                  </select>
                </div>
                <div class="col-md-2">
                  <select id="filterCategory" class="form-select">
                    <option value="">All Visa Types</option>
                    <option value="H1B">H1B</option>
                    <option value="F1">F1</option>
                    <option value="L1">L1</option>
                    <option value="O1">O1</option>
                    <option value="J1">J1</option>
                  </select>
                </div>
                <div class="col-md-2">
                  <button id="resetFilters" class="btn btn-outline-secondary w-100">Reset</button>
                </div>
                <div class="col-md-2">
                  <button id="addClientBtn" class="btn btn-success w-100">
                    <i class="fas fa-user-plus me-1"></i>Add Client
                  </button>
                  <button id="deleteSelectedBtn" class="btn btn-danger w-100" style="display: none;">
                    <i class="fas fa-trash-alt me-1"></i>Delete Selected
                  </button>
                </div>
              </div>

              <!-- Clients Table -->
              <div class="table-responsive">
                <table class="table table-striped table-hover">
                  <thead class="table-dark">
                    <tr>
                      <th width="50">
                        <input type="checkbox" id="selectAll" class="form-check-input">
                      </th>
                      <th class="sortable" data-column="frontend_id">
                        ID <i class="fas fa-sort sort-icon"></i>
                      </th>
                      <th class="sortable" data-column="name">
                        NAME <i class="fas fa-sort sort-icon"></i>
                      </th>
                      <th class="sortable" data-column="age">
                        AGE <i class="fas fa-sort sort-icon"></i>
                      </th>
                      <th>GENDER</th>
                      <th>LOCATION</th>
                      <th>
                        VISA TYPE
                      </th>
                      <th>PHONE</th>
                      <th class="sortable" data-column="arrival_date">
                        ARRIVAL DATE <i class="fas fa-sort sort-icon"></i>
                      </th>
                      <th width="120">ACTIONS</th>
                    </tr>
                  </thead>
                  <tbody id="allClientsTableBody">
                    <!-- All clients data will be populated here -->
                  </tbody>
                </table>
              </div>

              <!-- Pagination -->
              <nav id="paginationNav" aria-label="Clients pagination">
                <ul class="pagination justify-content-center">
                  <!-- Pagination will be generated by JavaScript -->
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Client Details Modal -->
  <div class="modal-overlay" id="clientModal">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalTitle">Client Details</h5>
        <button class="modal-close" id="modalClose">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body" id="modalBody">
        <!-- Client details will be populated here -->
      </div>
      <div class="modal-footer">
        <button class="btn-modal" id="modalOkBtn">Got it</button>
      </div>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div class="modal-overlay" id="confirmationModal">
    <div class="modal-content confirmation-modal">
      <div class="modal-header confirmation-header">
        <div class="confirmation-icon">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
        <h5 class="modal-title" id="confirmationTitle">Confirm Deletion</h5>
      </div>
      <div class="modal-body confirmation-body">
        <p id="confirmationMessage">Are you sure you want to delete the selected client(s)?</p>
        <div class="confirmation-details">
          <i class="fas fa-info-circle"></i>
          This action cannot be undone.
        </div>
      </div>
      <div class="modal-footer confirmation-footer">
        <button class="btn-modal btn-cancel" id="confirmationCancel">
          <i class="fas fa-times me-2"></i>Cancel
        </button>
        <button class="btn-modal btn-danger" id="confirmationConfirm">
          <i class="fas fa-trash-alt me-2"></i>Delete
        </button>
      </div>
    </div>
  </div>

  <!-- Success Modal -->
  <div class="modal-overlay" id="successModal">
    <div class="modal-content success-modal">
      <div class="modal-header success-header">
        <div class="success-icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <h5 class="modal-title" id="successTitle">Success!</h5>
      </div>
      <div class="modal-body success-body">
        <p id="successMessage">Operation completed successfully!</p>
      </div>
      <div class="modal-footer success-footer">
        <button class="btn-modal btn-success" id="successOk">
          <i class="fas fa-check me-2"></i>Got it
        </button>
      </div>
    </div>
  </div>

  <!-- Add Client Modal -->
  <div class="modal-overlay" id="addClientModal">
    <div class="modal-content add-client-modal">
      <div class="modal-header add-client-header">
        <div class="add-client-icon">
          <i class="fas fa-user-plus"></i>
        </div>
        <h5 class="modal-title">Add New Client</h5>
        <button class="modal-close" id="addClientModalClose">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body add-client-body">
        <form id="addClientForm" class="add-client-form">
          <div class="form-row">
            <div class="form-group">
              <label for="clientName"><i class="fas fa-user"></i> Full Name</label>
              <input type="text" id="clientName" name="name" class="form-control" placeholder="Enter client's full name" required>
            </div>
            <div class="form-group">
              <label for="clientAge"><i class="fas fa-birthday-cake"></i> Age</label>
              <input type="number" id="clientAge" name="age" class="form-control" placeholder="Age" min="1" max="120" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="clientGender"><i class="fas fa-venus-mars"></i> Gender</label>
              <select id="clientGender" name="gender" class="form-control" required>
                <option value="">Select gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
              </select>
            </div>
            <div class="form-group">
              <label for="clientDob"><i class="fas fa-calendar-alt"></i> Date of Birth</label>
              <input type="date" id="clientDob" name="dob" class="form-control">
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="clientLocation"><i class="fas fa-map-marker-alt"></i> Location</label>
              <input type="text" id="clientLocation" name="location" class="form-control" placeholder="City, State/Country" required>
            </div>
            <div class="form-group">
              <label for="clientVisaType"><i class="fas fa-passport"></i> Visa Type</label>
              <select id="clientVisaType" name="type" class="form-control" required>
                <option value="">Select visa type</option>
                <option value="H1B">H1B - Specialty Occupation</option>
                <option value="F1">F1 - Student Visa</option>
                <option value="L1">L1 - Intracompany Transfer</option>
                <option value="O1">O1 - Extraordinary Ability</option>
                <option value="J1">J1 - Exchange Visitor</option>
              </select>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="clientPhone"><i class="fas fa-phone"></i> Phone Number</label>
              <input type="tel" id="clientPhone" name="phone" class="form-control" placeholder="+1 (555) 123-4567">
            </div>
            <div class="form-group">
              <label for="clientArrivalDate"><i class="fas fa-plane-arrival"></i> Arrival Date</label>
              <input type="date" id="clientArrivalDate" name="arrival_date" class="form-control">
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="clientUsArrivalDate"><i class="fas fa-plane-departure"></i> US Arrival Date</label>
              <input type="date" id="clientUsArrivalDate" name="us_arrival_date" class="form-control">
            </div>
            <div class="form-group">
              <label for="clientVisaExpiry"><i class="fas fa-calendar-times"></i> Visa Expiry Date</label>
              <input type="date" id="clientVisaExpiry" name="visa_expiry_date" class="form-control">
            </div>
          </div>
          
          <div class="form-group full-width">
            <label for="clientNote"><i class="fas fa-sticky-note"></i> Notes (Optional)</label>
            <textarea id="clientNote" name="note" class="form-control" rows="3" placeholder="Additional notes about the client..."></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer add-client-footer">
        <button type="button" class="btn-modal btn-cancel" id="addClientCancel">
          <i class="fas fa-times me-2"></i>Cancel
        </button>
        <button type="submit" form="addClientForm" class="btn-modal btn-add-client">
          <i class="fas fa-user-plus me-2"></i>Add Client
        </button>
      </div>
    </div>
  </div>

  <!-- Error Modal -->
  <div class="modal-overlay" id="errorModal">
    <div class="modal-content error-modal">
      <div class="modal-header error-header">
        <div class="error-icon">
          <i class="fas fa-exclamation-circle"></i>
        </div>
        <h5 class="modal-title" id="errorTitle">Error Occurred</h5>
      </div>
      <div class="modal-body error-body">
        <p id="errorMessage">Something went wrong. Please try again.</p>
        <div class="error-details" id="errorDetails" style="display: none;">
          <details>
            <summary>Technical Details</summary>
            <div id="errorDetailsContent"></div>
          </details>
        </div>
      </div>
      <div class="modal-footer error-footer">
        <button class="btn-modal btn-primary" id="errorRetry" style="display: none;">
          <i class="fas fa-redo me-2"></i>Try Again
        </button>
        <button class="btn-modal btn-secondary" id="errorOk">
          <i class="fas fa-times me-2"></i>Close
        </button>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Custom JavaScript -->
  <script src="./dashboard.js"></script>
</body>
</html> 